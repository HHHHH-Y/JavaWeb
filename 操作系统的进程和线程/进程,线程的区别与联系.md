# 进程,线程的区别与联系

## 一. 进程, 进程的状态以及进程的特点

### 1. 进程和程序

程序: 一份给CPU指导的静态的指令集合,  其本身没有什么意义, 是一个静态的概念

进程: 进程就是正在运行中的程序, 它是一个动态的过程.

![image-20200615101304424](C:\Users\Huyue\AppData\Roaming\Typora\typora-user-images\image-20200615101304424.png)

如上图所示, MySQL5.7就是一个进程

不同的角度对于进程的定义也不同:

1. 用户角度: 进程是程序的一次执行过程
2. 操作系统角度: 进程是系统进行资源分配的最小单位(除了CPU!), 也是系统进行资源分配和调度的一个独立单位.

### 2. 进程的状态

计算机在工作的时候, CPU的核数是有限的, 但是需要执行的任务数远远大于CPU的核数, 所以就会发生这种现象: 有的任务正在CPU上运行, 而有的任务在等待运行,所以就导致进程存在多种状态.

![image-20200615103058435](C:\Users\Huyue\AppData\Roaming\Typora\typora-user-images\image-20200615103058435.png)

对于进程状态而言, 最主要的就是就绪, 运行和阻塞状态.

就绪: 进程满足所有运行条件,正在等待CPU

运行: 进程获得CPU且正在运行

阻塞: 进程不具备运行条件, 正在等待某个事件的完成.

**注意**:

1. **运行状态的前置状态必须是就绪状态**
2. **就绪状态什么时候切换到运行状态是 随机的**
3. **从运行状态切换到其他状态, 也是随机的**

### 进程的特点

1. 动态性: 进程是程序的一次执行过程, 具有一定的生命周期,它是动态的产生, 变化和消亡的.
2. 并发性: 任何进程都可以和其他进程一起并发执行.
3. 独立性: 进程是一个能独立运行的基本单位, 也是系统进行资源分配和调度的独立单位.
4. 异步性: 由于进程间相互制约, 使进程具有执行的间断性, 即进程按各自独立的, 不可预知的速度向前推进
5. 结构性: 进程是由程序, 数据和进程控制块三部分组成的

## 二. 线程

由于进程之间相互制约且各自独立, 而进程之间的切换开销很大,所以就引入了线程.



进程是系统分配资源的最小单位, 线程是系统调度的最小单位.

每个线程一定属于一个唯一的进程, 一个进程可以有一个或者多个线程, 它们可以共享这个进程的资源

## 三. 进程和线程的区别

1. 进程是系统进行资源分配和调度的一个独立单位

   线程是CPU调度的最小单位

2. 同一个进程中可以包括多个线程, 并且这些线程共享整个进程的资源(寄存器, 上下文, 堆栈), 一个进程至少包括一个线程.

3. 进程的创建调用fork或者vfork, 而线程的创建调用pthread_create

    进程结束后, 它所拥有的所有线程都将销毁, 但线程的结束不会影响同一个进程中其他线程

4. 线程的创建和销毁所需要得时间比进程小很多, 所有操作系统中的执行功能都是创建线程去完成的

   